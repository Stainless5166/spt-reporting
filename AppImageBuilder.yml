version: 1
AppDir:
  path: ./AppDir
  app_info:
    id: im.number53.spt-reporting
    name: SPT-Reporting
    icon: appicon.png
    version: latest
    exec: usr/bin/main
    exec_args: "$@"
AppImage:
  arch: x86_64
script:
  - rm -rf AppDir  | true
  - mkdir -p AppDir/usr/src
  - cp app/main.py  AppDir/usr/src -r
  - mkdir -p AppDir/usr/share/icons  # Added: Create a directory for the icons inside AppDir.
  - cp app/resources/icons/appicon.png AppDir/usr/share/icons # Added: Copy the icon into the newly created directory.
  - python3 -m pip install  --ignore-installed --prefix=/usr --root=AppDir -r ./requirements.txt
  - pyinstaller --onefile --name=main --distpath=AppDir/usr/bin app/main.py